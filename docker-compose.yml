services:
  api:
    build:
      context: .
      dockerfile: api/Dockerfile
    environment:
      DATABASE_URL: sqlite:////data/app.db
      ADMIN_EMAIL: ${ADMIN_EMAIL:-admin@local}
      ADMIN_PASSWORD: ${ADMIN_PASSWORD:-admin123}
    ports:
      - "127.0.0.1:8001:8001"
    volumes:
      - ./data:/data
    restart: unless-stopped

  web:
    build:
      context: .
      dockerfile: web/Dockerfile
    ports:
      - "127.0.0.1:5173:80"
    depends_on:
      - api
    restart: unless-stopped
